import pandas as pd
import numpy as np
import yfinance as yf

class StockAPI:
    
    def __init__(self):
        self.base_url = "https://apidojo-yahoo-finance-v1.p.rapidapi.com/stock/v2/get-financials"
        self.transactions = []
        self.assets = {}
        
    def exportJSON(filename):
        # input: name of file
        # output: write to desired file
        return 0
        
    def importJSON(filename):
        # input: filename or path
        # output: ???
        return 0

    def buy(self, ticker, quantity):    
        # update assetsSet
        if ticker in self.assets:
            self.assets[ticker] += quantity
        else:
            self.assets[ticker] = quantity
        self.transactions.append({"type": "buy", "ticker": ticker, "quantity": quantity})
        return 0

    def sell(self, ticker, quantity):
        # update assetsSet
        if ticker in self.assets:
            self.assets[ticker] -= quantity
        else:
            raise Exception("You do not own any shares of {}".format(ticker))
        self.transactions.append({"type": "sell", "ticker": ticker, "quantity": quantity})
        return 0

    def stockQuantity(self, ticker):
        # check if ticker is valid
        if ticker not in self.assets:
            return 0
        return self.assets[ticker]
        
   def printTransactions():
        
        
    def total_value(self):
        # loop through stocks owned, stockAmount * stockPrice
        total_value = 0
        for ticker, quantity in self.assets.items():
            price = self._get_stock_price(ticker)
            total_value += price * quantity
        return total_value
        
        
       def printEarningsVsTime():
        # input: ticker, start date, end date, quantity graphed
        # print changes in earnings over time, etc.
        return 0  
        
        
         class Transaction:
        type = 0
        '''
        “purchase” = +1
        “sell” = -1
        Note: this will make calculations much easier, e.g. to add up total amount of a stock, just add up all values of (type * quantity) without need for if statements
        '''
        quantity = 0
        time = 0  # Time you bought asset: Pandas Series .index should give date
        price = 0
